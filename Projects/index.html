<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="Shirly Herscovici is a motion graphic designer, video editor, and a Junior website developer who specializes in HTML & CSS">
  <meta name="robots" content="index,follow">
  <title>Shirly Herscovici | Design & Web Projects</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome for Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <!-- Google Fonts for 'Inter' (matching Homepage) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Particles.js CDN (for background effects) -->
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <style>
    /* Custom font for a modern look - Inter is a good choice */
    html {
      height: 100%;
      scroll-behavior: smooth; /* Smooth scrolling for anchor links */
      scroll-padding-top: 5rem; /* Added for fixed header compensation */
    }
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #f0f4f8, #e2e8f0, #f0f4f8);
      background-size: 400% 400%;
      animation: gradientBackground 15s ease infinite alternate;
      color: #1a202c;
      position: relative;
      overflow-x: hidden;
      display: flex;
      flex-direction: column;
      min-height: 100vh; /* Ensure body takes full viewport height */
    }

    /* Particles.js canvas styling */
    #particles-js {
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: -2;
    }

    /* Keyframes for background gradient animation */
    @keyframes gradientBackground {
      0% { background-position: 0% 0%; }
      100% { background-position: 100% 100%; }
    }

    /* Abstract background shapes/particles */
    body::before, body::after {
      content: '';
      position: fixed;
      z-index: -2;
      border-radius: 50%;
      opacity: 0.3;
      filter: blur(120px);
      transition: all 0.5s ease-in-out;
    }

    body::before {
      width: 450px;
      height: 450px;
      background: radial-gradient(circle at top left, #8dcef8, #3b82f6);
      top: -100px;
      left: -100px;
      animation: floatShape 24s infinite ease-in-out alternate;
    }

    body::after {
      width: 550px;
      height: 550px;
      background: radial-gradient(circle at bottom right, #e879f9, #a78bfa);
      bottom: -150px;
      right: -150px;
      animation: floatShape 30s infinite ease-in-out alternate-reverse;
    }

    @keyframes floatShape {
      0% { transform: translate(0, 0) rotate(0deg); }
      25% { transform: translate(40px, -50px) rotate(75deg); }
      50% { transform: translate(-20px, 80px) rotate(150deg); }
      75% { transform: translate(-60px, 30px) rotate(225deg); }
      100% { transform: translate(0, 0) rotate(300deg); }
    }

    /* Custom Footer Gradient - replicating original CSS */
    .custom-footer-gradient {
      background: linear-gradient(to right, #ff6600, #ff007b);
    }
    /* Frosted glass effect for header */
    .header-frosted {
      background-color: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    /* NEW: Main Title for Graphic Designs Page */
    .intro-graphic-design-header {
        margin-top: 5rem; /* Push down below header */
        padding-bottom: 2rem;
        overflow: hidden; /* Hide overflow during animation */
        position: relative; /* Needed for absolute positioning of child elements */
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 200px; /* Give some space for the animation */
    }

    .graphic-design-main-title {
        font-size: 4.5rem; /* Increased font size */
        font-weight: 800; /* Extra bold */
        text-align: center;
        background: linear-gradient(to right, #2563eb, #7c3aed, #ef4444); /* Blue-Purple-Red gradient */
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        color: transparent; /* Fallback */
        animation: fadeInSlideUp 1.5s ease-out forwards; /* NEW ANIMATION */
        display: inline-block; /* Essential for background-clip */
        line-height: 1.1;
        letter-spacing: -2px; /* Slightly tighter letter spacing */
        position: relative;
        padding: 0 1rem; /* Reduced padding further to ensure text doesn't clip */
        white-space: nowrap; /* Keep text on one line if possible, will break on small screens with media query */
        z-index: 1; /* Ensure text is above the background effect */
    }

    /* NEW ANIMATION FOR MAIN TITLE */
    @keyframes fadeInSlideUp {
        0% {
            opacity: 0;
            transform: translateY(30px) scale(0.95);
            filter: blur(5px);
        }
        100% {
            opacity: 1;
            transform: translateY(0) scale(1);
            filter: blur(0);
        }
    }

    /* NEW: Animated background element behind the main title */
    .title-bg-effect {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 500px; /* Adjusted width to be less wide */
        height: 700px; /* Increased height for elongated look */
        background: radial-gradient(circle, rgba(124,58,237,0.5) 0%, rgba(37,99,235,0.5) 100%); /* Purple to blue gradient, slightly more opaque */
        border-radius: 50%;
        filter: blur(180px); /* Adjusted blur */
        transform: translate(-50%, -50%) scale(0.8); /* Center and initial scale */
        animation: pulseElongated 20s ease-in-out infinite alternate; /* NEW ANIMATION */
        z-index: 0; /* Behind the text, above particles */
    }

    /* NEW ANIMATION FOR BACKGROUND EFFECT */
    @keyframes pulseElongated {
        0% { transform: translate(-50%, -50%) scale(0.8, 1.0); opacity: 0.7; }
        50% { transform: translate(-50%, -50%) scale(0.9, 1.1); opacity: 0.9; }
        100% { transform: translate(-50%, -50%) scale(0.8, 1.0); opacity: 0.7; }
    }


    /* --- General Section Title Styles (for both graphic and web) --- */
    .section-title {
        font-size: 3rem; /* Increased font size */
        font-weight: 700;
        /* Gradient background for text */
        background: linear-gradient(to right, #2563eb, #7c3aed); /* Blue to Purple gradient */
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        color: transparent; /* Fallback for browsers that don't support text fill color */

        margin-bottom: 2rem; /* Increased margin */
        position: relative;
        display: block; /* Ensure it takes full width for text-align to work */
        width: 100%; /* Ensure it takes full width for text-align to work */
        text-align: center; /* Centered horizontally */
        white-space: normal; /* Allow text to wrap naturally */
        border-right: none; /* Remove blinking caret */
        /* Changed animation for these titles to simple opacity */
        opacity: 0; /* Start invisible for animation */
        transition: opacity 1s ease-out; /* Simple opacity transition */
    }
    /* Class to trigger opacity animation */
    .section-title.is-visible {
        opacity: 1;
    }

    /* Adjust the section header to consistently center its content */
    .featured-project-container .section-header {
      display: flex;
      flex-direction: column; /* Keep as column to stack content if multiple items */
      align-items: center; /* Centers items horizontally in a column layout */
      justify-content: center; /* Centers items vertically in a column layout (if space) */
      margin-bottom: 2rem;
    }

    /* --- Project Item Cards (for side projects in Featured Layout) --- */
    .project-card-item {
      background-color: #ffffff;
      border-radius: 0.75rem;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      height: auto;
      cursor: pointer;
      flex-shrink: 0;
      max-width: 300px; /* Narrower max width for side project cards */
      margin: 0 auto; /* Center individual cards when they are narrower than their container */
    }

    .project-card-item:hover {
      transform: translateY(-5px) scale(1.02);
      /* Blue glow effect */
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.2), 0 0 25px 5px rgba(37, 99, 235, 0.7);
    }

    /* New styles for image and title container */
    .featured-project-image-wrapper,
    .project-card-item-image-wrapper {
      position: relative;
      overflow: hidden; /* Ensures title overlay doesn't spill out */
      border-radius: 0.75rem 0.75rem 0 0; /* Match parent card top radius */
    }

    .project-card-item img {
      width: 100%;
      height: 200px; /* Increased height for side project images to make them more elongated */
      object-fit: cover;
      border-radius: 0.75rem 0.75rem 0 0;
    }

    .project-card-item-content {
      padding: 1rem; /* Standard padding for side project content */
      text-align: center;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding-top: 0.5rem; /* Reduced padding-top as title is now an overlay */
    }

    .project-card-item p {
      font-size: 0.85rem; /* Standard text size for side projects */
      color: #4a5568;
      line-height: 1.5;
      margin-bottom: 0.5rem; /* Reduced bottom margin */
      flex-grow: 1;
    }

    .project-card-item .view-project-btn {
      margin-top: auto;
      align-self: center;
      /* Gradient background for button: Blue -> Purple -> Blue */
      background-image: linear-gradient(to right, #3b82f6, #7c3aed, #3b82f6);
      background-size: 200% auto; /* For gradient animation */
      background-position: left center; /* Start from left */
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 9999px;
      transition: background-position 0.5s ease, transform 0.2s ease, box-shadow 0.2s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-weight: 500;
    }

    .project-card-item .view-project-btn:hover {
      background-position: right center; /* Slide gradient to right */
      transform: translateY(-2px);
      /* Blue glow effect */
      box-shadow: 0 4px 8px rgba(59, 130, 246, 0.3), 0 0 15px 3px rgba(37, 99, 235, 0.7);
    }

    /* Style for the "View All Projects" button (now only for Graphic) */
    .view-all-button-container {
        text-align: center;
        margin-top: 2rem;
        margin-bottom: 4rem; /* More space before next section or footer */
    }

    .view-all-button {
        background-color: #3b82f6; /* Blue, matching view-project-btn */
        color: white;
        padding: 1rem 2rem;
        border-radius: 9999px;
        font-size: 1.125rem;
        font-weight: 600;
        transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 8px rgba(59, 130, 246, 0.2); /* Blue shadow */
    }

    .view-all-button:hover {
        background-color: #2563eb; /* Darker blue on hover */
        transform: translateY(-3px) scale(1.02);
        /* Blue glow effect */
        box-shadow: 0 6px 12px rgba(59, 130, 246, 0.3), 0 0 20px 4px rgba(37, 99, 235, 0.7);
    }

    /* --- Header & Nav specific styles for dropdown --- */
    nav ul li.group { /* Parent li for dropdown */
        position: relative;
    }

    nav ul li.group ul { /* The sub-menu itself */
        position: absolute;
        top: 100%; /* Position right below parent link */
        left: 0;
        background-color: white;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        border-radius: 0.5rem;
        min-width: 100%;
        z-index: 10;
        opacity: 0;
        visibility: hidden;
        transform: translateY(10px);
        transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s ease;
        pointer-events: none; /* Crucial: allows clicks *through* when hidden */
        display: block; /* Ensure it's a block for positioning, visibility handled by opacity */
    }

    /* Style for when the dropdown is explicitly shown by JS click on desktop */
    nav ul li.group ul.show-dropdown {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
        pointer-events: auto; /* Allows clicks on sub-menu items when visible */
    }

    /* Style for when the dropdown is shown by CSS hover on desktop */
    nav ul li.group:hover ul {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
        pointer-events: auto;
    }

    /* Footer bug fix consideration: Ensure main content takes available space */
    main {
        flex-grow: 1; /* Allows main to take up all available space */
        padding-top: 5rem; /* Adjusted to 5rem to account for fixed header */
        padding-bottom: 5rem; /* Ensure enough space at the bottom before footer */
    }


    /* --- Featured Project Layout (Common for both Graphic and Web) --- */
    .featured-project-container {
        max-width: 1200px;
        margin: 2rem auto;
        padding: 0 1rem;
    }

    .featured-projects-content {
      display: flex;
      flex-direction: column; /* Default to column for mobile */
      /* Increased spacing */
      gap: 3rem; /* Increased gap between featured and side projects */
      padding: 2rem; /* Increased padding inside the content area */
      background-color: rgba(255, 255, 255, 0.6);
      border-radius: 1rem;
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      /* For vertical alignment of featured and side projects */
      align-items: stretch; /* Stretch children to fill height of tallest sibling */
      position: relative; /* Needed for positioning the absolute title and background effect */
    }

    /* Decorative background for side title */
    .side-title-bg-effect {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.8); /* Initial state for animation */
        width: 100%;
        height: 100%;
        background: radial-gradient(circle, rgba(124,58,237,0.4) 0%, rgba(37,99,235,0.4) 100%); /* Radial gradient with increased opacity */
        filter: blur(120px); /* Increased blur */
        border-radius: 50%; /* Circular blur */
        z-index: 0; /* Behind the title */
        display: none; /* Hidden by default, shown on desktop */
        opacity: 0.1; /* Adjusted initial opacity for animation */
        animation: pulseLight 4s infinite ease-in-out alternate; /* Apply new animation */
    }

    /* ANIMATION FOR FLASH EFFECT */
    @keyframes pulseLight {
        0% {
            opacity: 0.1;
            transform: translate(-50%, -50%) scale(0.8);
            filter: blur(120px);
        }
        50% {
            opacity: 0.65; /* Stronger flash (was 0.6) */
            transform: translate(-50%, -50%) scale(1.1); /* Slightly bigger */
            filter: blur(140px); /* More blur at peak */
        }
        100% {
            opacity: 0.1;
            transform: translate(-50%, -50%) scale(0.8);
            filter: blur(120px);
        }
    }


    /* Abstract pattern overlay */
    .abstract-pattern-overlay {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 90%; /* Adjust size as needed */
        height: 90%; /* Adjust size as needed */
        /* Updated SVG: changed stroke color for better visibility */
        background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3Cpattern id='diagonal-lines' x='0' y='0' width='10' height='10' patternUnits='userSpaceOnUse'%3E%3Cpath d='M-1 1 l2 -2 M0 10 l10 -10 M9 11 l2 -2' stroke='%23333333' stroke-width='1' opacity='0.1'/%3E%3C/pattern%3E%3C/defs%3E%3Crect x='0' y='0' width='100' height='100' fill='url(%23diagonal-lines)' /%3E%3C/svg%3E");
        background-repeat: repeat;
        opacity: 0.15; /* Adjusted opacity to be a bit more noticeable (was 0.1) */
        pointer-events: none; /* Ensure it doesn't block clicks */
        z-index: 0; /* Behind the title, same as side-title-bg-effect */
        display: none; /* Hidden by default, shown on desktop */
    }


    .featured-project {
      background-color: #ffffff;
      border-radius: 0.75rem;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      flex-grow: 1; /* Allow it to take available space */
      /* No padding-bottom here, rely on content for spacing */
      transition: transform 0.3s ease, box-shadow 0.3s ease; /* Add transition for hover effect */
      max-width: 400px; /* Narrower max width for side project cards */
      margin: 0 auto; /* Center individual cards when they are narrower than their container */
    }

    .featured-project:hover {
        transform: translateY(-5px) scale(1.01); /* Subtle lift */
        /* Blue glow effect */
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2), 0 0 25px 5px rgba(37, 99, 235, 0.7);
    }

    .featured-project img {
      width: 100%;
      height: 350px; /* Increased height for featured project to make it more elongated */
      object-fit: cover;
      border-radius: 0.75rem 0.75rem 0 0;
    }

    .featured-project-content {
      padding: 1.5rem;
      text-align: center;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding-top: 0.5rem; /* Reduced padding-top as title is now an overlay */
    }
    
    /* Apply the same button style to the featured project buttons */
    .featured-project .view-project-btn {
        margin-top: auto;
        align-self: center;
        background-image: linear-gradient(to right, #3b82f6, #7c3aed, #3b82f6); /* Blue -> Purple -> Blue */
        background-size: 200% auto;
        background-position: left center;
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 9999px;
        transition: background-position 0.5s ease, transform 0.2s ease, box-shadow 0.2s ease;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-weight: 500;
    }

    .project-card-item .view-project-btn:hover {
      background-position: right center; /* Slide gradient to right */
      transform: translateY(-2px);
      /* Blue glow effect */
      box-shadow: 0 4px 8px rgba(59, 130, 246, 0.3), 0 0 15px 3px rgba(37, 99, 235, 0.7);
    }


    /* We will remove this grid definition for mobile to allow flex-direction column to work */
    .side-projects-grid {
      display: grid;
      grid-template-columns: 1fr; /* Stack on mobile */
      gap: 2rem; /* Increased gap for side projects */
      flex-grow: 1; /* Allow side projects grid to grow and take available space */
    }

    /* NEW: Styles for the left side containing the title and its effect */
    .left-section-header {
        display: none; /* Hidden by default (mobile) */
    }

    /* NEW: Styles for the wrapper containing all projects on the right */
    .right-projects-wrapper {
        display: flex;
        flex-direction: column; /* Stacks featured and side projects on mobile */
        gap: 3rem; /* Spacing between featured and side projects */
    }

    /* NEW: Styles for section titles when placed as "side titles" in desktop view */
    .section-title-side {
        font-size: 3.4rem; /* Adjusted for horizontal placement - INCREASED SIZE */
        font-weight: 700;
        background: linear-gradient(to right, #2563eb, #7c3aed);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        color: transparent;
        position: relative; /* Ensure it stays above brush stroke if needed */
        z-index: 2; /* To be above brush stroke */
        white-space: normal; /* Allow text to wrap if it's very long */
        text-align: center; /* Align text to the center within its space */
        line-height: 1.2;
        padding-top: 0; /* Reset padding if any */
        padding-left: 0; /* Reset padding if any */
        margin-bottom: 0.5rem; /* Small margin below title */
        display: none; /* Hidden by default, shown on desktop */
    }

    /* NEW: Animated Brush Stroke for side titles */
    .side-title-brush-stroke {
        display: none; /* Hidden by default for mobile */
    }

    /* ANIMATION FOR BRUSH STROKE */
    @keyframes drawBrush {
        0% {
            transform: scaleX(0);
            opacity: 0;
        }
        100% {
            transform: scaleX(1);
            opacity: 1;
        }
    }

    @media (min-width: 768px) {
      .featured-project-container .section-header {
        /* Hide the original section-header which contains the mobile title */
        display: none;
      }
      .featured-project-container .section-title {
        /* Hide the original section title in desktop view */
        display: none;
      }
      .featured-projects-content {
        display: flex; /* Use flexbox for side-by-side title and projects */
        flex-direction: row; /* Layout items horizontally */
        gap: 2rem; /* Gap between the left title area and the right projects area */
        padding: 2rem; /* Overall padding for the content area */
        align-items: stretch; /* Make children stretch to fill height of the tallest sibling */
      }

      /* Show the side title and its background for desktop */
      .left-section-header {
        display: flex; /* Show the left container */
        flex-direction: column; /* Stack title and effect vertically */
        justify-content: center; /* Center vertically within the container */
        align-items: center; /* Center horizontally within the container for text */
        position: relative; /* For absolute positioning of its background effect */
        flex-basis: 250px; /* Fixed width for the left column */
        flex-shrink: 0; /* Prevent it from shrinking */
        flex-grow: 1; /* Allow it to grow if space permits */
      }
      .section-title-side {
        display: block; /* Show the horizontal title on desktop */
      }
      .side-title-bg-effect {
        display: block; /* Show the background effect on desktop */
        position: absolute;
        top: 50%; /* Center vertically within .left-section-header */
        left: 50%; /* Center horizontally within .left-section-header */
        transform: translate(-50%, -50%); /* Use translate to perfectly center based on its own size */
        width: 100%; /* Keep it within its parent's width */
        height: 100%;
        border-radius: 50%; /* Circular blur */
        background: radial-gradient(circle, rgba(124,58,237,0.4) 0%, rgba(37,99,235,0.4) 100%); /* Radial gradient with increased opacity */
        filter: blur(120px); /* Increased blur */
        z-index: 0;
      }
      .abstract-pattern-overlay {
          display: block; /* Show only on desktop */
      }

      .right-projects-wrapper {
          display: grid; /* Changed to grid for finer control */
          grid-template-columns: 1.2fr 1fr; /* Featured project is now 1.2 times wider than side projects (was 1.5fr) */
          grid-template-rows: repeat(2, minmax(min-content, 1fr)); /* Two rows, each occupying equal space, but at least content height */
          gap: 2rem; /* Gap between the two columns and rows */
          align-items: stretch; /* Stretch items to fill their grid cells */
          flex-grow: 1; /* Allow this wrapper to take remaining space */
      }

      .featured-project {
          grid-row: 1 / span 2; /* Span both rows */
          grid-column: 1; /* First column */
          max-width: none; /* Remove max-width to allow grid to control width */
          margin: 0; /* Remove auto margin */
          height: auto; /* Allow height to be determined by grid */
          min-height: 0; /* Override any potential default min-height */
      }

      .featured-project img {
        height: 350px; /* Maintain fixed height for featured image */
        object-fit: cover;
      }
      
      .featured-project-content {
          flex-grow: 1;
          display: flex;
          flex-direction: column;
          justify-content: space-between;
      }

      /* Update side-projects-grid for grid layout */
      .side-projects-grid {
          display: flex; /* Use flex for internal stacking of side projects */
          flex-direction: column;
          gap: 2rem; /* Maintain gap between side projects */
          grid-column: 2; /* Place in the second column of the main grid */
          grid-row: 1 / span 2; /* Also span both rows, ensuring vertical alignment */
          max-width: none;
          margin: 0;
          height: auto; /* Allow height to be determined by grid */
          min-height: 0;
      }
      
      .project-card-item {
        /* Reset any conflicting mobile styles for desktop */
        width: auto;
        height: auto; /* Allow height to be flexible */
        flex-grow: 1; /* Each card takes equal space within side-projects-grid */
      }


      .side-title-brush-stroke {
        display: block; /* Show on desktop */
        width: 80%; /* Percentage of parent width */
        max-width: 180px; /* Max width to visually match "Development" (was 250px) */
        height: 4px; /* Thinner line (was 6px) */
        background: linear-gradient(to right, #3b82f6, #7c3aed);
        border-radius: 3px;
        margin: 10px auto 0 auto; /* Centers it horizontally, adds space below title */
        opacity: 0; /* Initially invisible */
        transform: scaleX(0); /* Start with zero width via scale */
        transform-origin: left center; /* Scale from left to right */
        animation: drawBrush 1.5s ease-out forwards 0.8s; /* Animate over 1.5s, delayed by 0.8s */
        z-index: 1; /* To be above background effects */
    }
    }


    /* --- Carousel Section Styling --- */
    .carousel-section {
        padding: 2rem 1rem;
        width: 100%; /* Ensures it takes full width */
        margin: 4rem 0; /* Changed margin-left/right to 0 for full width */
        text-align: center;
        background-color: rgba(255, 255, 255, 0.4);
        border-radius: 1.5rem;
        box-shadow: 0 8px 24px rgba(0,0,0,0.1);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        position: relative;
        border: none;
    }

    .carousel-wrapper {
        display: flex;
        overflow-x: scroll; /* Changed to scroll to allow smooth scrolling and position tracking */
        scroll-behavior: smooth;
        scroll-snap-type: x mandatory;
        -webkit-overflow-scrolling: touch;
        border-radius: 1rem;
        margin: 1rem 0;
        align-items: stretch;
        min-height: 400px; /* Increased min-height for carousel */
    }

    .carousel-item {
        flex: 0 0 350px; /* Fixed width for carousel items, increased size */
        min-width: 350px; /* Ensure minimum width, increased size */
        margin: 0 10px; /* Fixed margin between items */
        scroll-snap-align: center;
        padding: 0.75rem;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: rgba(255, 255, 255, 0.6);
        border-radius: 1rem;
        box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        transition: transform 0.3s ease, opacity 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease; /* Added opacity to transition */
        border: none;
        opacity: 1; /* Default opacity */
        transform: scale(1); /* Default scale */
    }

    .carousel-item-faded {
        opacity: 0.4; /* Faded items */
        transform: scale(0.9); /* Slightly smaller */
    }

    .carousel-item:hover {
        transform: translateY(-5px) scale(1.01);
        /* Blue glow effect */
        box-shadow: 0 6px 15px rgba(0,0,0,0.15), 0 0 20px 4px rgba(37, 99, 235, 0.7);
        background-color: rgba(255, 255, 255, 0.8);
    }

    .carousel-item img {
        width: 100%;
        height: 350px; /* Make image take full height of its container, increased size */
        object-fit: contain; /* Ensure full image is visible */
        border-radius: 0.75rem;
    }

    .carousel-nav-btn {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background-color: rgba(59, 130, 246, 0.6);
        color: white;
        border: none;
        padding: 1rem;
        cursor: pointer;
        font-size: 1.5rem;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        display: flex;
        justify-content: center;
        align-items: center;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
        z-index: 2;
    }

    .carousel-nav-btn:hover {
        background-color: #2563eb;
        transform: translateY(-50%) scale(1.1);
        /* Blue glow effect */
        box-shadow: 0 6px 15px rgba(0,0,0,0.3), 0 0 20px 4px rgba(37, 99, 235, 0.7);
    }

    .carousel-nav-btn.prev {
        left: 1rem;
    }

    .carousel-nav-btn.next {
        right: 1rem;
    }

    /* Project Details Modal specific styling */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 1000;
    }

    .modal-overlay.is-visible {
        display: flex;
    }

    .modal-content {
        background-color: #ffffff;
        padding: 2rem;
        border-radius: 1rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        /* Adjusted max-width to make the modal narrower */
        max-width: 400px; /* Reduced max-width further for a narrower look */
        width: 90%;
        position: relative;
        text-align: left;
        transform: scale(0.9);
        opacity: 0;
        transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    .modal-overlay.is-visible .modal-content {
        transform: scale(1);
        opacity: 1;
    }

    .modal-close-btn {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: none;
        border: none;
        font-size: 2rem;
        color: #6b7280;
        cursor: pointer;
        transition: color 0.2s ease;
    }

    .modal-close-btn:hover {
        color: #3b82f6; /* Changed to blue on hover */
    }
    .spinner {
        border: 4px solid rgba(0, 0, 0, 0.1);
        width: 24px;
        height: 24px;
        border-radius: 50%;
        border-left-color: #3b82f6;
        animation: spin 1s ease infinite;
    }
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }


    /* Responsive adjustments for header and general sections */
    @media (max-width: 767px) {
      /* Header, nav, and main padding adjustments */
      header .container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        position: relative;
      }
      #main-nav-menu {
        display: none; /* Controlled by JS active class */
        flex-direction: column;
        position: absolute;
        top: 100%;
        left: 0;
        width: 100%;
        background-color: rgba(241, 245, 249, 0.95);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        z-index: 100;
        padding: 1rem 0;
        border-radius: 0 0 0.5rem 0.5rem;
      }
      #main-nav-menu.active {
        display: flex; /* Show main menu on mobile */
      }
      #main-nav-menu li {
        width: 100%;
        text-align: center;
        border-bottom: 1px solid #e2e8f0;
      }
      #main-nav-menu li:last-child {
        border-bottom: none;
      }
      #main-nav-menu li a {
        display: block;
        padding: 0.75rem 1rem;
        color: #4a5568;
        font-weight: 500;
      }
      #main-nav-menu li a.bg-blue-600 {
        color: white;
        border-radius: 0;
      }
      #mobile-menu-toggle {
        display: block;
        order: 2;
      }
      main {
        padding-top: 8rem; /* Higher padding for mobile to clear header */
      }

      /* New Main Title on Mobile */
      .intro-graphic-design-header {
        margin-top: 6rem; /* Adjust margin for mobile fixed header */
        min-height: 150px;
      }
      .graphic-design-main-title {
          font-size: 2.8rem; /* Adjusted font size for mobile */
          letter-spacing: -1px;
          line-height: 1.2;
          padding: 0 1rem; /* Adjusted padding for mobile to prevent clipping */
          white-space: normal; /* Allow text to wrap on small mobile screens */
      }
      .title-bg-effect {
          width: 250px; /* Adjusted size for mobile */
          height: 350px; /* Adjusted size for mobile, more elongated */
          filter: blur(120px); /* Adjusted blur for mobile */
          transform: translate(-50%, -50%) scale(0.9, 1.3); /* Initial transform for mobile */
      }
      @keyframes pulseElongated { /* Adjusted for mobile */
        0% { transform: translate(-50%, -50%) scale(0.9, 1.3); opacity: 0.7; }
        50% { transform: translate(-50%, -50%) scale(1.0, 1.4); opacity: 0.9; }
        100% { transform: translate(-50%, -50%) scale(0.9, 1.3); opacity: 0.7; }
      }

      /* Section titles on mobile */
      .section-title {
        font-size: 2rem;
        margin-bottom: 1rem;
        white-space: normal;
        width: auto;
        border-right: none;
        animation: none;
        -webkit-text-fill-color: initial;
        color: #2563eb; /* Use a solid color for mobile fallback */
        background: none; /* Remove background gradient on mobile */
        text-align: center; /* Ensure centered on mobile */
      }
      
      /* Hide side title and brush stroke on mobile */
      .section-title-side, .side-title-bg-effect, .abstract-pattern-overlay, .side-title-brush-stroke {
        display: none;
      }

      /* Individual project cards (side web & side graphic) on mobile */
      .project-card-item {
        width: 100%; /* Take full width on mobile */
        height: auto;
        margin: 0 auto; /* Center individual cards */
      }
      .project-card-item img {
        height: 180px;
      }
      .project-card-item-content {
        padding: 1rem;
      }
      .project-card-item .view-project-btn {
        padding: 0.6rem 1.2rem;
        font-size: 0.9rem;
      }

      /* Featured project on mobile */
      .featured-project img {
        height: 200px; /* Adjust featured image height for mobile */
      }
      .featured-project-content p {
        font-size: 0.95rem;
      }

      /* Mobile: Ensure projects stack correctly without grid issues */
      .right-projects-wrapper {
        display: flex;
        flex-direction: column;
        gap: 2rem; /* Consistent gap */
      }

      .side-projects-grid {
          display: flex; /* Ensure side projects remain a flex column on mobile */
          flex-direction: column;
          gap: 2rem;
          width: 100%; /* Take full width on mobile */
      }

      /* Carousel adjustments on mobile */
      .carousel-section {
          padding: 1rem; /* Less padding on mobile */
          margin: 2rem 0; /* Full width on mobile as well */
          border-radius: 1rem; /* Smaller border-radius on mobile */
      }
      .carousel-wrapper {
          min-height: 250px; /* Smaller min-height for carousel on mobile, increased from 200px */
      }
      .carousel-item {
          flex: 0 0 calc(90% - 1rem); /* Show ~1.2 items with gap */
          margin: 0 0.5rem; /* Half of the gap on each side */
          padding: 0.5rem; /* Less padding inside carousel items */
          border-radius: 0.75rem; /* Smaller border-radius on mobile */
      }
      .carousel-item img {
          height: 200px; /* Fixed height for carousel images on mobile */
      }
      .carousel-nav-btn {
          width: 40px;
          height: 40px;
          font-size: 1.2rem;
          padding: 0.5rem;
      }
      /* Specific font sizes for titles within the overlay on mobile */
      .featured-project-title-overlay {
        font-size: 1.5rem; /* Adjusted for mobile */
      }
      .project-card-item-title-overlay {
        font-size: 1rem; /* Adjusted for mobile */
      }
    }
  </style>
</head>

<body>
  <!-- Particles.js Canvas -->
  <div id="particles-js"></div>

  <!-- Header -->
  <header class="header-frosted shadow-md fixed w-full z-50">
    <nav class="container mx-auto px-6 py-4 flex justify-between items-center flex-wrap">
      <div class="logo flex items-center">
        <i class="fas fa-code text-blue-600 text-3xl mr-2"></i>
        <h1 class="text-3xl font-bold text-gray-800 hover:text-blue-600 transition duration-300 rounded-lg p-2">Shirly Herscovici</h1>
      </div>
      <!-- Hamburger menu button for mobile -->
      <button id="mobile-menu-toggle" class="md:hidden text-gray-700 hover:text-blue-600 focus:outline-none focus:text-blue-600">
        <i class="fas fa-bars text-2xl"></i>
      </button>
      <ul id="main-nav-menu" class="hidden md:flex flex-col md:flex-row space-x-0 md:space-x-8 mt-4 md:mt-0 w-full md:w-auto">
        <li><a href="https://shirly3212.github.io/Shirly_portfolio/index.html" class="text-lg text-gray-700 hover:text-blue-600 transition duration-300 py-2 px-3 rounded-md">Home</a></li>
        
        <!-- Design with Sub-menu -->
        <li class="relative group">
            <a href="https://shirly3212.github.io/Shirly_portfolio/Projects/index.html" class="text-lg text-gray-700 hover:text-blue-600 transition duration-300 py-2 px-3 rounded-md" id="design-menu-toggle">Design <i class="fas fa-chevron-down ml-1 text-sm group-hover:rotate-180 transition-transform"></i></a>
            <ul class="absolute bg-white shadow-lg rounded-md mt-2 w-48 z-10">
                <li><a href="https://shirly3212.github.io/Shirly_portfolio/Projects/graphic-all-projects.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md" id="graphic-projects-link">Graphic Projects</a></li>
            </ul>
        </li>
        <li><a href="https://shirly3212.github.io/Shirly_portfolio/Video/index.html" class="text-lg text-gray-700 hover:text-blue-600 transition duration-300 py-2 px-3 rounded-md">Video</a></li> <!-- Added Video Link -->
        <li><a href="https://shirly3212.github.io/Shirly_portfolio/ai/index.html" class="bg-blue-600 text-white font-semibold py-2 px-3 rounded-md transition duration-300 hover:bg-blue-700">AI</a></li>
        <li><a href="https://shirly3212.github.io/Shirly_portfolio/index.html#contact-section" class="text-lg text-gray-700 hover:text-blue-600 transition duration-300 py-2 px-3 rounded-md">Contact</a></li>
      </ul>
    </nav>
  </header>

  <main class="pt-20 pb-12 flex-grow">
    <!-- NEW: Animated Intro Title for Graphic Designs Page -->
    <section class="intro-graphic-design-header py-16 text-center">
        <h1 class="graphic-design-main-title">
            Websites Graphic Design
        </h1>
        <div class="title-bg-effect"></div> <!-- Animated background graphic -->
    </section>

    <div class="page-content container mx-auto px-4">

      <!-- Web Development Section (Featured Project Layout) -->
      <section id="web-development-section" class="py-12 mt-20">
        <div class="featured-project-container text-center max-w-full mx-auto">
            <div class="section-header">
                <!-- Original section title for mobile -->
                <h2 class="section-title">Web Development</h2>
            </div>
            <div class="featured-projects-content">
                <div class="left-section-header"> <!-- New wrapper for side title and effect -->
                    <h2 class="section-title-side">Web Development</h2>
                    <div class="side-title-brush-stroke"></div> <!-- NEW ELEMENT HERE -->
                    <div class="side-title-bg-effect"></div>
                    <div class="abstract-pattern-overlay"></div> <!-- New abstract pattern -->
                </div>
                <div class="right-projects-wrapper"> <!-- New wrapper for project cards -->
                    <!-- Featured Project (TRAVELLY) -->
                    <div class="featured-project animate-on-scroll"
                        data-project='{
                            "id": "travelly",
                            "title": "TRAVELLY - Travel Agency Website",
                            "image": "../img/TRAVEELY_ME.png",
                            "description": "This responsive and modern website for a travel agency features an attractive design and a seamless user experience. Developed with HTML, CSS, and vanilla JavaScript.",
                            "technologies": ["HTML5", "CSS3", "JavaScript"],
                            "live_demo": "https://shirly3212.github.io/TRAVELLY/",
                            "github_repo": "https://shirly3212.github.io/TRAVELLY",
                            "type": "web"
                        }'>
                        <div class="featured-project-image-wrapper">
                            <img src="../img/TRAVEELY_ME.png" alt="Travelly Website" onerror="this.onerror=null;this.src='https://placehold.co/800x600/cccccc/333333?text=Image+Not+Found';">
                            <h4 class="featured-project-title-overlay">TRAVELLY - Travel Agency Website</h4>
                        </div>
                        <div class="featured-project-content">
                            <p>This responsive and modern website for a travel agency features an attractive design and a seamless user experience. Developed with HTML, CSS, and vanilla JavaScript.</p>
                            <button class="view-project-btn">View Project <i class="fas fa-external-link-alt ml-2"></i></button>
                        </div>
                    </div>

                    <!-- Side Projects Grid Container -->
                    <div class="side-projects-grid">
                        <!-- Project Item 2: People Counter -->
                        <div class="project-card-item animate-on-scroll"
                            data-project='{
                                "id": "people-counter",
                                "title": "People Counter - Simple Counter App",
                                "image": "../img/PEOPLE_COUNTER.png",
                                "description": "A straightforward web application designed to count people entering or exiting an area. Built with HTML, CSS, and JavaScript, it provides a clean, intuitive interface.",
                                "technologies": ["HTML5", "CSS3", "JavaScript"],
                                "live_demo": "https://shirly3212.github.io/People-Counter/",
                                "github_repo": "https://shirly3212.github.io/People-Counter",
                                "type": "web"
                            }'>
                            <div class="project-card-item-image-wrapper">
                                <img src="../img/PEOPLE_COUNTER.png" alt="People Counter App" onerror="this.onerror=null;this.src='https://placehold.co/800x600/cccccc/333333?text=Image+Not+Found';">
                                <h4 class="project-card-item-title-overlay">People Counter - Simple Counter App</h4>
                            </div>
                            <div class="project-card-item-content">
                                <p>A straightforward web application designed to count people entering or exiting an area. Built with HTML, CSS, and JavaScript, it provides a clean, intuitive interface.</p>
                                <button class="view-project-btn">View Project <i class="fas fa-external-link-alt ml-2"></i></button>
                            </div>
                        </div>

                        <!-- Project Item 3: Photographer -->
                        <div class="project-card-item animate-on-scroll"
                            data-project='{
                                "id": "photographer",
                                "title": "Photographer - Visual Portfolio",
                                "image": "../img/Photographer_me.png",
                                "description": "A sleek visual portfolio website created for photographers to showcase their work in an elegant and modern style. It features a responsive layout and image galleries.",
                                "technologies": ["HTML5", "CSS3"],
                                "live_demo": "https://shirly3212.github.io/Photographer/",
                                "github_repo": "https://shirly3212.github.io/Photographer",
                                "type": "web"
                            }'>
                            <div class="project-card-item-image-wrapper">
                                <img src="../img/Photographer_me.png" alt="Photographer Portfolio" onerror="this.onerror=null;this.src='https://placehold.co/800x600/cccccc/333333?text=Image+Not+Found';">
                                <h4 class="project-card-item-title-overlay">Photographer - Visual Portfolio</h4>
                            </div>
                            <div class="project-card-item-content">
                                <p>A sleek visual portfolio website created for photographers to showcase their work in an elegant and modern style. It features a responsive layout and image galleries.</p>
                                <button class="view-project-btn">View Project <i class="fas fa-external-link-alt ml-2"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
      </section>

      <!-- Graphic Design Projects Section (Featured Project Layout) -->
      <section id="graphic-design-section" class="py-12 mt-20">
        <div class="featured-project-container text-center max-w-full mx-auto">
            <div class="section-header">
                <!-- Original section title for mobile -->
                <h2 class="section-title">Graphic Design</h2>
            </div>
            <div class="featured-projects-content">
                <div class="left-section-header"> <!-- New wrapper for side title and effect -->
                    <h2 class="section-title-side">Graphic Design</h2>
                    <div class="side-title-brush-stroke"></div> <!-- NEW ELEMENT HERE -->
                    <div class="side-title-bg-effect"></div>
                    <div class="abstract-pattern-overlay"></div> <!-- New abstract pattern -->
                </div>
                <div class="right-projects-wrapper"> <!-- New wrapper for project cards -->
                    <!-- Featured Graphic Project (World Cup 22 Infographic) -->
                    <div class="featured-project animate-on-scroll"
                        data-project='{
                            "id": "worldcup22",
                            "title": "World Cup 22 Infographic",
                            "image": "../img/thumbnail1.jpg",
                            "description": "An engaging infographic for the 2022 World Cup, featuring key statistics and visual highlights. It transforms complex data into a visually appealing and easy-to-understand format.",
                            "technologies": ["Adobe Illustrator", "Infographics", "Data Visualization"],
                            "live_demo": "https://makospecial.co.il/worldcup22",
                            "type": "graphic"
                        }'>
                        <div class="featured-project-image-wrapper">
                            <img src="../img/thumbnail1.jpg" alt="World Cup 22 Infographic" onerror="this.onerror=null;this.src='https://placehold.co/800x600/cccccc/333333?text=Image+Not+Found';">
                            <h4 class="featured-project-title-overlay">World Cup 22 Infographic</h4>
                        </div>
                        <div class="featured-project-content">
                            <p>An engaging infographic for the 2022 World Cup, featuring key statistics and visual highlights.</p>
                            <button class="view-project-btn">
                                View Image <i class="fas fa-eye ml-2"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Side Graphic Projects Grid Container -->
                    <div class="side-projects-grid">
                        <!-- Graphic Project Item 2: Road Accidents -->
                        <div class="project-card-item animate-on-scroll"
                            data-project='{
                                "id": "road-accidents",
                                "title": "Road Accidents Data Visualization",
                                "image": "../img/thumbnail2.jpg",
                                "description": "A comprehensive data visualization project on road accident statistics. Designed to highlight critical safety information through clear and impactful graphics.",
                                "technologies": ["Adobe Photoshop", "Data Analysis", "Graphic Design"],
                                "live_demo": "https://specialprojects.mako.co.il/Road_Accidents",
                                "type": "graphic"
                            }'>
                            <div class="project-card-item-image-wrapper">
                                <img src="../img/thumbnail2.jpg" alt="Road Accidents Data Visualization" onerror="this.onerror=null;this.src='https://placehold.co/800x600/cccccc/333333?text=Image+Not+Found';">
                                <h4 class="project-card-item-title-overlay">Road Accidents Data Visualization</h4>
                            </div>
                            <div class="project-card-item-content">
                                <p>A comprehensive data visualization project on road accident statistics.</p>
                                <button class="view-project-btn">
                                    View Image <i class="fas fa-eye ml-2"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Graphic Project Item 3: Climate Change -->
                        <div class="project-card-item animate-on-scroll"
                            data-project='{
                                "id": "climate-change",
                                "title": "Ukraine and Russia war",
                                "image": "../img/ukraineeee12.png",
                                "description": "Graphics created to raise awareness about climate change. Translates complex environmental data into easily understandable and visually compelling messages.",
                                "technologies": ["Adobe InDesign", "Illustrations", "Environmental Design"],
                                "live_demo": "https://makospecial.co.il/ukrainewar?makoOpenChromeTabs=1",
                                "type": "graphic"
                            }'>
                            <div class="project-card-item-image-wrapper">
                                <img src="../img/ukraineeee12.png" alt="Ukraine and Russia war" onerror="this.onerror=null;this.src='https://placehold.co/800x600/cccccc/333333?text=Image+Not+Found';">
                                <h4 class="project-card-item-title-overlay">Ukraine and Russia war</h4>
                            </div>
                            <div class="project-card-item-content">
                                <p>Graphics created to raise awareness about ukraine and russia war and it's development.</p>
                                <button class="view-project-btn">
                                    View Image <i class="fas fa-eye ml-2"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="view-all-button-container">
                <a href="https://shirly3212.github.io/Shirly_portfolio/Projects/graphic-all-projects.html" class="view-all-button">
                    View All Graphic Projects <i class="fas fa-arrow-right ml-2"></i>
                </a>
            </div>
        </div>
      </section>

      <!-- Graphic Design Gallery Carousel Section -->
      <section id="graphic-carousel-section" class="carousel-section container mx-auto">
        <h2 class="section-title">Gallery</h2>
        <div class="carousel-wrapper" id="carouselWrapper">
            <div class="carousel-item"
                 data-project='{
                   "id": "gallery-item-1",
                   "title": "Dynamic Graphic Design",
                   "image": "../img/gallery1.jpg",
                   "description": "Dynamic graphic design combining vibrant colors and fluid shapes for movement and energy.",
                   "technologies": ["Adobe Illustrator", "Concept Art"],
                   "live_demo": "../img/gallery1.jpg",
                   "type": "graphic",
                   "is_carousel_item": true
                 }'>
                <img src="../img/gallery1.jpg" alt="Dynamic Graphic Design" onerror="this.onerror=null;this.src='https://placehold.co/600x400/cccccc/333333?text=Image+Not+Found';">
            </div>
            <div class="carousel-item"
                 data-project='{
                   "id": "gallery-item-2",
                   "title": "Abstract Graphic Design",
                   "image": "../img/gallery2.jpg",
                   "description": "Abstract graphic design with unique textures and minimalist forms, inviting interpretation.",
                   "technologies": ["Adobe Photoshop", "Digital Painting"],
                   "live_demo": "../img/gallery2.jpg",
                   "type": "graphic",
                   "is_carousel_item": true
                 }'>
                <img src="../img/gallery2.jpg" alt="Abstract Graphic Design" onerror="this.onerror=null;this.src='https://placehold.co/600x400/cccccc/333333?text=Image+Not +Found';">
            </div>
            <div class="carousel-item"
                 data-project='{
                   "id": "gallery-item-3",
                   "title": "Creative Graphic Design",
                   "image": "../img/gallery3.jpg",
                   "description": "Highly creative graphic design demonstrating innovative typography and visual hierarchy for powerful messages.",
                   "technologies": ["Adobe InDesign", "Typography"],
                   "live_demo": "../img/gallery3.jpg",
                   "type": "graphic",
                   "is_carousel_item": true
                 }'>
                <img src="../img/gallery3.jpg" alt="Creative Graphic Design" onerror="this.onerror=null;this.src='https://placehold.co/600x400/cccccc/333333?text=Image+Not+Found';">
            </div>
            <div class="carousel-item"
                 data-project='{
                   "id": "gallery-item-4",
                   "title": "Modern Graphic Design",
                   "image": "../img/gallery4.jpg",
                   "description": "Modern graphic design emphasizing clean lines, balanced composition, and a sophisticated color palette for branding.",
                   "technologies": ["Adobe Illustrator", "Branding"],
                   "live_demo": "../img/gallery4.jpg",
                   "type": "graphic",
                   "is_carousel_item": true
                 }'>
                <img src="../img/gallery4.jpg" alt="Modern Graphic Design" onerror="this.onerror=null;this.src='https://placehold.co/600x400/cccccc/333333?text=Image+Not+Found';">
            </div>
            <div class="carousel-item"
                 data-project='{
                   "id": "gallery-item-5",
                   "title": "Digital Art Design",
                   "image": "../img/gallery5.jpg",
                   "description": "Vibrant digital art showcasing experimental techniques and a rich blend of colors for an immersive visual experience.",
                   "technologies": ["Procreate", "Digital Painting"],
                   "live_demo": "../img/gallery5.jpg",
                   "type": "graphic",
                   "is_carousel_item": true
                 }'>
                <img src="../img/gallery5.jpg" alt="Digital Art Design" onerror="this.onerror=null;this.src='https://placehold.co/800x600/cccccc/333333?text=Image+Not+Found';">
            </div>
            <div class="carousel-item"
                 data-project='{
                   "id": "gallery-item-6",
                   "title": "Visual Identity Design",
                   "image": "../img/gallery6.jpg",
                   "description": "Comprehensive visual identity design, including logo, color scheme, and typography, crafted to represent brand values.",
                   "technologies": ["Adobe Illustrator", "Logo Design"],
                   "live_demo": "../img/gallery6.jpg",
                   "type": "graphic",
                   "is_carousel_item": true
                 }'>
                <img src="../img/gallery6.jpg" alt="Visual Identity Design" onerror="this.onerror=null;this.src='https://placehold.co/800x600/cccccc/333333?text=Image+Not+Found';">
            </div>
            <!-- NEW GALLERY IMAGES -->
            <div class="carousel-item"
                 data-project='{
                   "id": "gallery-item-nova",
                   "title": "\"  \" - 7.10",
                   "image": "../img/nova.jpg",
                   "description": "   \"  \"   7 .       .",
                   "technologies": [" ", "", ""],
                   "live_demo": "../img/nova.jpg",
                   "type": "graphic",
                   "is_carousel_item": true
                 }'>
                <img src="../img/nova.jpg" alt="\"  \"" onerror="this.onerror=null;this.src='https://placehold.co/600x400/cccccc/333333?text=Image+Not+Found';">
            </div>
            <div class="carousel-item"
                 data-project='{
                   "id": "gallery-item-woman",
                   "title": " \'  \'",
                   "image": "../img/woman.jpg",
                   "description": "        ,      .",
                   "technologies": [" ", " ", ""],
                   "live_demo": "../img/woman.jpg",
                   "type": "graphic",
                   "is_carousel_item": true
                 }'>
                <img src="../img/woman.jpg" alt=" \'  \'" onerror="this.onerror=null;this.src='https://placehold.co/600x400/cccccc/333333?text=Image+Not+Found';">
            </div>
            <div class="carousel-item"
                 data-project='{
                   "id": "gallery-item-galatz",
                   "title": "  -  N12",
                   "image": "../img/galatz.jpg",
                   "description": "   ' '   -N12,    .",
                   "technologies": [" ", "", " "],
                   "live_demo": "../img/galatz.jpg",
                   "type": "graphic",
                   "is_carousel_item": true
                 }'>
                <img src="../img/galatz.jpg" alt="  -  N12" onerror="this.onerror=null;this.src='https://placehold.co/600x400/cccccc/333333?text=Image+Not+Found';">
            </div>
        </div>
        <button class="carousel-nav-btn prev" id="prevBtn"><i class="fas fa-chevron-left"></i></button>
        <button class="carousel-nav-btn next" id="nextBtn"><i class="fas fa-chevron-right"></i></button>
      </section>

    </div>
  </main>

  <!-- Footer -->
  <footer class="custom-footer-gradient text-white min-h-7vh py-8 flex justify-between items-center flex-wrap px-5 mt-auto">
    <h4 class="text-xl font-medium mb-4 md:mb-0">Shirly Herscovici  2025</h4>
    <ul class="flex justify-center items-center flex-wrap gap-6">
      <li><a href="#" class="text-white hover:text-gray-200 transition duration-300" title="Instagram"><i class="fab fa-instagram text-2xl"></i></a></li>
      <li><a href="#" class="text-white hover:text-gray-200 transition duration-300" title="Twitter"><i class="fab fa-twitter text-2xl"></i></a></li>
      <li><a href="https://www.youtube.com/channel/UCmoA-WifFijhY71DV90qi0w" target="_blank" rel="noopener noreferrer" class="text-white hover:text-gray-200 transition duration-300" title="YouTube"><i class="fab fa-youtube text-2xl"></i></a></li>
      <li><a href="#" class="text-white hover:text-gray-200 transition duration-300" title="LinkedIn"><i class="fab fa-linkedin-in text-2xl"></i></a></li>
      <li><a href="#" class="text-white hover:text-gray-200 transition duration-300" title="GitHub"><i class="fab fa-github text-2xl"></i></a></li>
    </ul>
  </footer>

  <!-- Project Details Modal -->
  <div id="projectModal" class="modal-overlay">
      <div class="modal-content">
          <button class="modal-close-btn" id="closeModalBtn">&times;</button>
          <img id="modalProjectImage" src="" alt="Project Image" class="rounded-md mb-4 w-full h-auto object-contain">
          <!-- These elements will be conditionally hidden by JS for carousel images -->
          <h3 id="modalProjectTitle" class="text-3xl font-bold text-gray-800 mb-4"></h3>
          <p id="modalProjectDescription" class="text-gray-700 mb-4"></p>
          <div class="flex flex-wrap gap-2 mb-4">
              <span class="text-gray-600 font-semibold">Technologies Used:</span>
              <div id="modalTechnologies" class="flex flex-wrap gap-2"></div>
          </div>
          <div id="aiInsightContainer" class="mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg text-blue-800 text-left hidden">
              <p class="font-semibold mb-2"> AI Insight:</p>
              <div id="aiInsightText"></div>
              <div id="aiInsightLoading" class="flex items-center justify-center mt-2 hidden">
                  <div class="spinner mr-2"></div>
                  <span>Generating insight...</span>
              </div>
          </div>
          <div class="flex justify-center gap-4 mt-6">
              <a id="modalLiveDemoBtn" href="#" target="_blank" rel="noopener noreferrer" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-full text-lg transition duration-300 flex items-center">
                  Live Demo <i class="fas fa-external-link-alt ml-2"></i>
              </a>
              <a id="modalGithubRepoBtn" href="#" target="_blank" rel="noopener noreferrer" class="bg-gray-700 hover:bg-gray-800 text-white font-semibold py-2 px-6 rounded-full text-lg transition duration-300 flex items-center">
                  GitHub Repo <i class="fab fa-github ml-2"></i>
              </a>
              <button id="aiInsightBtn" class="bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-6 rounded-full text-lg transition duration-300 flex items-center justify-center">
                   AI Insight
              </button>
          </div>
      </div>
  </div>

  <!-- Particles.js library -->
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <script>
    // --- Particles.js Initialization ---
    particlesJS("particles-js", {
      "particles": {
        "number": { "value": 80, "density": { "enable": true, "value_area": 800 } },
        "color": { "value": "#ffffff" }, /* Light blue/cyan */
        "shape": { "type": "circle" },
        "opacity": { "value": 0.5, "random": false },
        "size": { "value": 3, "random": true },
        "line_linked": {
          "enable": true,
          "distance": 150,
          "color": "#ffffff",
          "opacity": 0.4,
          "width": 1
        },
        "move": {
          "enable": true,
          "speed": 6, /* Slightly slower speed for subtlety */
          "direction": "none",
          "random": false,
          "straight": false,
          "out_mode": "out",
          "bounce": false,
          "attract": { "enable": false, "rotateX": 600, "rotateY": 1200 }
        }
      },
      "interactivity": {
        "detect_on": "canvas",
        "events": {
          "onhover": { "enable": true, "mode": "grab" }, /* Grab effect on hover */
          "onclick": { "enable": true, "mode": "push" }, /* Push effect on click */
          "resize": true
        },
        "modes": {
          "grab": { "distance": 140, "line_linked": { "opacity": 1 } },
          "bubble": { "distance": 400, "size": 40, "duration": 2, "opacity": 8, "speed": 3 },
          "repulse": { "distance": 200, "duration": 0.4 },
          "push": { "particles_nb": 4 },
          "remove": { "particles_nb": 2 }
        }
      },
      "retina_detect": true
    });

    // --- Animation on Scroll Logic (UPDATED for section-title) ---
    // Select all elements that need animation, including section titles
    const allAnimatedElements = document.querySelectorAll('.animate-on-scroll, .section-title');

    const observerOptions = {
        root: null, /* viewport as root */
        rootMargin: '0px',
        threshold: 0.1 /* callback fires when 10% of item is visible */
    };

    const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('is-visible');
                // Optionally, unobserve after animation to prevent re-triggering
                // if (entry.target.classList.contains('animate-on-scroll') || entry.target.classList.contains('section-title')) {
                //     observer.unobserve(entry.target);
                // }
            } else {
                // Optional: remove is-visible when out of view if animation should repeat on re-entry
                // entry.target.classList.remove('is-visible');
            }
        });
    }, observerOptions);

    allAnimatedElements.forEach(element => {
        observer.observe(element);
    });

    // --- Modal Logic ---
    const projectModal = document.getElementById('projectModal');
    const closeModalBtn = document.getElementById('closeModalBtn');
    const modalProjectImage = document.getElementById('modalProjectImage');
    const modalProjectTitle = document.getElementById('modalProjectTitle');
    const modalProjectDescription = document.getElementById('modalProjectDescription');
    const modalTechnologies = document.getElementById('modalTechnologies');
    const modalLiveDemoBtn = document.getElementById('modalLiveDemoBtn');
    const modalGithubRepoBtn = document.getElementById('modalGithubRepoBtn');
    const aiInsightBtn = document.getElementById('aiInsightBtn');
    const aiInsightContainer = document.getElementById('aiInsightContainer');
    const aiInsightText = document.getElementById('aiInsightText');
    const aiInsightLoading = document.getElementById('aiInsightLoading');

    let currentProjectData = null; // Store data of the currently opened project

    // Function to open the modal
    function openModal(projectData) {
        currentProjectData = projectData; // Store the data
        modalProjectImage.src = projectData.image;
        modalProjectImage.alt = projectData.title; // Set alt text for accessibility

        const isCarouselGalleryItem = projectData.is_carousel_item === true;

        // Reset all elements to their default (visible) state
        modalProjectTitle.classList.remove('hidden');
        modalProjectDescription.classList.remove('hidden');
        modalTechnologies.parentElement.classList.remove('hidden'); // Parent div of technologies
        modalLiveDemoBtn.classList.remove('hidden');
        modalGithubRepoBtn.classList.remove('hidden');
        aiInsightBtn.classList.remove('hidden');
        aiInsightContainer.classList.add('hidden'); // AI insight content hidden by default
        aiInsightText.textContent = ''; // Clear any previous AI insight text
        aiInsightLoading.classList.add('hidden'); // Hide AI loading spinner

        // Set default object-fit for modal image
        modalProjectImage.classList.add('object-contain');
        modalProjectImage.classList.remove('h-64', 'object-cover'); // Ensure these are removed by default

        if (isCarouselGalleryItem) {
            // If it's a carousel gallery item, hide text and buttons
            modalProjectTitle.classList.add('hidden');
            modalProjectDescription.classList.add('hidden');
            modalTechnologies.parentElement.classList.add('hidden');
            modalLiveDemoBtn.classList.add('hidden');
            modalGithubRepoBtn.classList.add('hidden');
            aiInsightBtn.classList.add('hidden');
            // For carousel items, ensure image takes up full width and is contained (not cropped)
            modalProjectImage.classList.add('w-full', 'h-auto', 'object-contain'); // Make it full width, auto height, contain
        } else {
            // For regular project cards, populate content
            modalProjectTitle.textContent = projectData.title;
            modalProjectDescription.textContent = projectData.description;

            modalTechnologies.innerHTML = ''; // Clear previous technologies
            if (projectData.technologies && projectData.technologies.length > 0) {
                projectData.technologies.forEach(tech => {
                    const span = document.createElement('span');
                    span.textContent = tech;
                    span.classList.add('bg-blue-100', 'text-blue-800', 'text-xs', 'font-medium', 'px-2.5', 'py-0.5', 'rounded-full');
                    modalTechnologies.appendChild(span);
                });
            } else {
                modalTechnologies.parentElement.classList.add('hidden'); // Hide if no technologies
            }

            // Show/hide GitHub button based on data
            if (projectData.github_repo && projectData.github_repo !== '#') {
                modalGithubRepoBtn.href = projectData.github_repo;
            } else {
                modalGithubRepoBtn.classList.add('hidden');
            }

            // Show/hide Live Demo button based on data
            if (projectData.live_demo && projectData.live_demo !== '#') {
                modalLiveDemoBtn.href = projectData.live_demo;
            } else {
                modalLiveDemoBtn.classList.add('hidden');
            }

            // AI Insight button should only be visible for Web projects (not graphic)
            if (projectData.type === 'graphic') {
                aiInsightBtn.classList.add('hidden');
            } else {
                aiInsightBtn.classList.remove('hidden');
            }
            // Ensure regular project images also have appropriate sizing in modal
            modalProjectImage.classList.add('h-64', 'object-cover'); // Restore fixed height and cropping for regular projects
        }

        projectModal.classList.add('is-visible');
        document.body.style.overflow = 'hidden'; // Prevent scrolling of body
    }

    // Function to close the modal
    function closeModal() {
        projectModal.classList.remove('is-visible');
        document.body.style.overflow = ''; // Restore scrolling of body
        currentProjectData = null; // Clear current project data
    }

    // Event listeners for opening modal: on any .project-card-item, .carousel-item or .featured-project
    document.querySelectorAll('.project-card-item, .carousel-item, .featured-project').forEach(item => {
        item.addEventListener('click', (event) => {
            // Prevent opening modal if a child button (like View Project) was clicked, 
            // as those buttons have their own href or event listeners
            if (event.target.closest('.view-project-btn')) {
                return;
            }

            let projectData = null;
            const projectDataString = item.dataset.project;

            if (!projectDataString || projectDataString === "undefined") {
                console.error("Invalid or undefined project data string for this item:", item);
                return;
            }
            try {
                projectData = JSON.parse(projectDataString);
            }
            catch (e) {
                console.error("Error parsing JSON for project data:", projectDataString, e);
                return;
            }
            
            if (projectData) {
                openModal(projectData);
            }
        });
    });

    // Handle clicks on "View Project" buttons *inside* the project cards
    document.querySelectorAll('.view-project-btn').forEach(button => {
        button.addEventListener('click', (event) => {
            event.stopPropagation(); // Stop click from propagating to parent card
            const card = event.target.closest('.project-card-item') || event.target.closest('.featured-project');
            if (card) {
                const projectDataString = card.dataset.project;
                if (!projectDataString || projectDataString === "undefined") {
                    console.error("Invalid or undefined project data string for this card:", projectDataString);
                    return;
                }
                try {
                    const projectData = JSON.parse(projectDataString);
                    openModal(projectData);
                } catch (e) {
                    console.error("Error parsing JSON for project data:", projectDataString, e);
                }
            }
        });
    });


    // Event listener for closing modal via button
    closeModalBtn.addEventListener('click', closeModal);

    // Event listener for closing modal by clicking outside content
    projectModal.addEventListener('click', (event) => {
        if (event.target === projectModal) { // Only close if clicked directly on overlay
            closeModal();
        }
    });

    // Event listener for closing modal with Escape key
    document.addEventListener('keydown', (event) => {
        if (event.key === 'Escape' && projectModal.classList.contains('is-visible')) {
            closeModal();
        }
    });

    // --- Gemini API Integration ---
    aiInsightBtn.addEventListener('click', async () => {
        // AI Insight should only be available for 'web' type projects and not carousel gallery items
        if (!currentProjectData || currentProjectData.type !== 'web' || currentProjectData.is_carousel_item === true) { 
            aiInsightContainer.classList.add('hidden'); // Ensure hidden if not applicable
            console.error("AI Insight is only available for Web Development projects (and not for gallery images).");
            return;
        }

        aiInsightContainer.classList.remove('hidden'); // Show container
        aiInsightText.textContent = ''; // Clear previous text
        aiInsightLoading.classList.remove('hidden'); // Show loading spinner

        const prompt = `Given the following web development project:
Title: ${currentProjectData.title}
Description: ${currentProjectData.description}
Technologies: ${currentProjectData.technologies ? currentProjectData.technologies.join(', ') : 'N/A'}

Provide a concise, engaging, and insightful summary (2-3 sentences) highlighting the unique aspect or impact of this project. Focus on what makes it stand out or its practical value. Do not include a title for the summary. Return only the summary text.`;

        let chatHistory = [];
        chatHistory.push({ role: "user", parts: [{ text: prompt }] });
        const payload = { contents: chatHistory };
        const apiKey = ""; // If you want to use models other than gemini-2.0-flash or imagen-3.0-generate-002, provide an API key here. Otherwise, leave this as-is.
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

        try {
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
            const result = await response.json();

            if (result.candidates && result.candidates.length > 0 &&
                result.candidates[0].content && result.candidates[0].content.parts &&
                result.candidates[0].content.parts.length > 0) {
                const text = result.candidates[0].content.parts[0].text;
                aiInsightText.textContent = text;
            } else {
                aiInsightText.textContent = "Failed to generate insight. Please try again.";
                console.error("Unexpected API response structure:", result);
            }
        } catch (error) {
            aiInsightText.textContent = "Error generating insight. " + error.message;
            console.error("Error calling Gemini API:", error);
        } finally {
            aiInsightLoading.classList.add('hidden'); // Hide loading spinner
        }
    });

    // --- Mobile Navigation Toggle ---
    document.addEventListener("DOMContentLoaded", function () {
      const mainNavUl = document.getElementById("main-nav-menu"); // Main ul
      const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
      const designMenuToggle = document.getElementById('design-menu-toggle'); // The "Design" link
      const designSubMenu = designMenuToggle.nextElementSibling; // The ul after "Design" link

      // Function to close all menus (main and sub)
      function closeAllMenus() {
          mainNavUl.classList.remove('active'); // Close main mobile menu
          if (designSubMenu) {
              designSubMenu.classList.remove('active'); // Close mobile dropdown
              designSubMenu.classList.remove('show-dropdown'); // Close desktop click dropdown
              designMenuToggle.querySelector('i').classList.remove('rotate-180'); // Reset chevron
          }
      }

      if (mobileMenuToggle) {
          mobileMenuToggle.addEventListener('click', (event) => {
              event.stopPropagation(); // Prevent immediate closing due to outer click listener
              mainNavUl.classList.toggle('active');
              if (!mainNavUl.classList.contains('active')) { // If closing main menu
                  closeAllMenus(); // Close everything if hamburger is closing the main menu
              }
          });
      }

      // Design sub-menu toggle (for mobile and click scenarios on desktop)
      if (designMenuToggle && designSubMenu) {
          designMenuToggle.addEventListener('click', (event) => {
              event.preventDefault(); // ALWAYS prevent default link behavior for this specific toggle button
              event.stopPropagation(); // Prevent immediate closing due to outer click listener

              if (window.innerWidth < 768) { // Mobile behavior: toggle 'active' class
                  designSubMenu.classList.toggle('active');
              } else { // Desktop behavior: toggle 'show-dropdown' class
                  designSubMenu.classList.toggle('show-dropdown');
              }
              designMenuToggle.querySelector('i').classList.toggle('rotate-180'); // Rotate chevron
          });

          // Close sub-menu if clicking outside on desktop
          document.addEventListener('click', (event) => {
              // Only apply this logic on desktop sizes
              if (window.innerWidth >= 768) {
                  const isClickInsideDesignToggle = designMenuToggle.contains(event.target);
                  const isClickInsideDesignSubMenu = designSubMenu.contains(event.target);

                  // If the dropdown is currently shown by JS (show-dropdown)
                  // and the click was outside both the toggle button and the dropdown itself
                  if (designSubMenu.classList.contains('show-dropdown') && !isClickInsideDesignToggle && !isClickInsideDesignSubMenu) {
                      designSubMenu.classList.remove('show-dropdown');
                      designMenuToggle.querySelector('i').classList.remove('rotate-180');
                  }
              }
          });

          // Close all menus when a link inside main nav or sub-menu is clicked
          mainNavUl.querySelectorAll('a').forEach(link => {
              link.addEventListener('click', (event) => {
                  // If it's a sub-menu item or a non-group main nav link, close all menus
                  if (link.closest('.group ul') || (!link.closest('.group') && link.href && link.href !== '#')) {
                      closeAllMenus();
                  }
              });
          });
      }

      // Close all menus if resized to desktop view (from mobile)
      window.addEventListener('resize', () => {
          if (window.innerWidth >= 768) {
              closeAllMenus();
          }
      });
    });

    // --- Carousel Logic (New) ---
    const carouselWrapper = document.getElementById('carouselWrapper');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    let carouselItems = document.querySelectorAll('.carousel-item'); // Re-query to get all items including new ones
    let currentIndex = 0;

    function updateCarousel() {
        if (!carouselWrapper || carouselItems.length === 0) return;

        const containerWidth = carouselWrapper.offsetWidth;
        const itemWidth = carouselItems[0].offsetWidth; // Fixed 350px
        const itemMargin = parseFloat(window.getComputedStyle(carouselItems[0]).marginLeft) + parseFloat(window.getComputedStyle(carouselItems[0]).marginRight); // Fixed 20px (10px each side)
        const itemTotalWidth = itemWidth + itemMargin; // 350 + 20 = 370px

        // Calculate the target scroll position to center the current item.
        // It's the cumulative width of items before the current one + half the width of the current item
        // adjusted by half of the container width to center it in the view.
        let scrollPosition = (currentIndex * itemTotalWidth) - (containerWidth / 2) + (itemTotalWidth / 2);
        
        // Ensure scrollPosition does not go below 0 or beyond max scrollable width
        scrollPosition = Math.max(0, scrollPosition);
        const maxScrollLeft = carouselWrapper.scrollWidth - containerWidth;
        scrollPosition = Math.min(scrollPosition, maxScrollLeft);

        carouselWrapper.scrollLeft = scrollPosition;

        // Apply fade effect based on distance from current (centered) item
        carouselItems.forEach((item, index) => {
            if (index === currentIndex) {
                item.classList.remove('carousel-item-faded');
            } else {
                item.classList.add('carousel-item-faded');
            }
        });
    }

    // Function to handle automatic centering of carousel items on scroll
    function onCarouselScroll() {
        if (!carouselWrapper || carouselItems.length === 0) return;

        const scrollLeft = carouselWrapper.scrollLeft;
        const containerWidth = carouselWrapper.offsetWidth;
        const itemWidth = carouselItems[0].offsetWidth;
        const itemMargin = parseFloat(window.getComputedStyle(carouselItems[0]).marginLeft) + parseFloat(window.getComputedStyle(carouselItems[0]).marginRight);
        const itemTotalWidth = itemWidth + itemMargin;

        // Calculate which item is currently closest to the center of the viewport
        const centralViewPoint = scrollLeft + (containerWidth / 2);
        let closestIndex = 0;
        let minDistance = Infinity;

        carouselItems.forEach((item, index) => {
            const itemCenter = (index * itemTotalWidth) + (itemWidth / 2) + (itemMargin / 2);
            const distance = Math.abs(itemCenter - centralViewPoint);

            if (distance < minDistance) {
                minDistance = distance;
                closestIndex = index;
            }
        });
        currentIndex = closestIndex; // Update global currentIndex

        // Apply fade effect based on distance from the closest item to the center
        carouselItems.forEach((item, index) => {
            if (index === currentIndex) {
                item.classList.remove('carousel-item-faded');
            } else {
                item.classList.add('carousel-item-faded');
            }
        });
    }

    // Initialize carousel on load
    window.addEventListener('load', () => {
        carouselItems = document.querySelectorAll('.carousel-item'); // Re-query items in case of dynamic content
        updateCarousel(); // Position correctly and apply initial fades
    });
    // Also update on resize to ensure correct snapping if layout changes
    window.addEventListener('resize', () => {
        carouselItems = document.querySelectorAll('.carousel-item'); // Re-query items
        updateCarousel(); // Re-calculate and snap to nearest item on resize
    });

    // Add scroll event listener to apply fade effect dynamically
    if (carouselWrapper) {
        carouselWrapper.addEventListener('scroll', onCarouselScroll);
    }

    // Navigation buttons
    if (prevBtn) {
        prevBtn.addEventListener('click', () => {
            currentIndex = (currentIndex > 0) ? currentIndex - 1 : carouselItems.length - 1; // Loop around
            updateCarousel();
        });
    }

    if (nextBtn) {
        nextBtn.addEventListener('click', () => {
            currentIndex = (currentIndex < carouselItems.length - 1) ? currentIndex + 1 : 0; // Loop around
            updateCarousel();
        });
    }

    // Optional: Add swipe functionality for touch devices
    let startX;
    let isSwiping = false;

    if (carouselWrapper) {
        carouselWrapper.addEventListener('touchstart', (e) => {
            startX = e.touches[0].clientX;
            isSwiping = true;
        });

        carouselWrapper.addEventListener('touchmove', (e) => {
            if (!isSwiping) return;
            // Allow native scrolling for touchmove, the touchend will handle snap
        });

        carouselWrapper.addEventListener('touchend', (e) => {
            if (!isSwiping) return;
            const endX = e.changedTouches[0].clientX;
            const diff = startX - endX;

            // Trigger a manual snap to center if a swipe gesture is detected
            if (Math.abs(diff) > 50) { // A threshold for a valid swipe
                if (diff > 0) { // Swiped left (show next)
                    currentIndex = (currentIndex < carouselItems.length - 1) ? currentIndex + 1 : 0;
                } else { // Swiped right (show prev)
                    currentIndex = (currentIndex > 0) ? currentIndex - 1 : carouselItems.length - 1;
                }
                updateCarousel(); // Trigger snap to new current index
            } else {
                // If no significant swipe, ensure it snaps to the nearest item
                // This will be handled by the onCarouselScroll listener due to `scroll-snap-type`
            }
            isSwiping = false;
        });
    }

    // NEW: Function to highlight the active navigation item based on the URL
    function highlightActiveNav() {
        const currentPathname = window.location.pathname;
        const mainNavLinks = document.querySelectorAll('#main-nav-menu > li > a');
        const designMenuToggle = document.getElementById('design-menu-toggle');
        const graphicProjectsLink = document.getElementById('graphic-projects-link');

        // Remove active classes from all links initially
        mainNavLinks.forEach(link => {
            link.classList.remove('bg-blue-600', 'text-white', 'font-semibold');
            link.classList.add('text-gray-700', 'hover:text-blue-600');
        });
        if (graphicProjectsLink) {
            graphicProjectsLink.classList.remove('bg-blue-600', 'text-white', 'font-semibold');
            graphicProjectsLink.classList.add('text-gray-700', 'hover:bg-gray-100');
        }

        // Check for "Design" related pages
        const isGraphicProjectsPage = currentPathname.includes('/Projects/graphic-all-projects.html');
        const isMainProjectsPage = currentPathname.includes('/Projects/index.html') && !isGraphicProjectsPage;

        if (isGraphicProjectsPage) {
            // If on graphic projects page, highlight both "Design" and "Graphic Projects" submenu item
            if (designMenuToggle) {
                designMenuToggle.classList.add('bg-blue-600', 'text-white', 'font-semibold');
                designMenuToggle.classList.remove('text-gray-700', 'hover:text-blue-600');
            }
            if (graphicProjectsLink) {
                graphicProjectsLink.classList.add('bg-blue-600', 'text-white', 'font-semibold');
                graphicProjectsLink.classList.remove('text-gray-700', 'hover:bg-gray-100');
            }
        } else if (isMainProjectsPage) {
            // If on main projects index page, highlight "Design"
            if (designMenuToggle) {
                designMenuToggle.classList.add('bg-blue-600', 'text-white', 'font-semibold');
                designMenuToggle.classList.remove('text-gray-700', 'hover:text-blue-600');
            }
        } else {
            // For other main navigation links, check for direct match
            mainNavLinks.forEach(link => {
                // Ensure to clean the href for comparison (remove '..' if present)
                const linkHrefCleaned = link.getAttribute('href') ? link.getAttribute('href').replace('../', '/') : '';
                // Compare only the last part of the path or the full path depending on complexity
                if (linkHrefCleaned && currentPathname.includes(linkHrefCleaned) && link.id !== 'design-menu-toggle') {
                     link.classList.add('bg-blue-600', 'text-white', 'font-semibold');
                     link.classList.remove('text-gray-700', 'hover:text-blue-600');
                }
            });
        }
    }

    // Call the function when the DOM is fully loaded
    document.addEventListener('DOMContentLoaded', highlightActiveNav);
  </script>
</body>

</html>
